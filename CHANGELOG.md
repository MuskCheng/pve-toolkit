# 更新日志

所有重要的更改都将记录在此文件中。

## [V0.36] - 2026-02-21

### 新增

- **版本管理优化**
  - 创建 VERSION 文件统一管理版本号
  - 启动时自动查询 GitHub 最新版本
  - 主界面显示"当前版本"和"最新版本"
  - README 使用 shields.io 动态获取版本

## [V0.35] - 2026-02-21

### 新增

- **install.sh 增加国内加速源**
  - 支持 jsDelivr CDN 加速下载
  - 安装时可选官方源/加速源
  - 默认选择加速源，失败时自动切换备用源
  - README 增加官方源/加速源两种一键安装方式

## [V0.34] - 2026-02-21

### 新增

- **Docker 源增加国内加速**
  - 中科大 Docker 源 (推荐国内)
  - 阿里云 Docker 源
  - 清华 Docker 源

## [V0.33] - 2026-02-21

### 新增

- **系统管理 - 修复 Docker 源**
  - 解决阿里云 Docker 源不支持 Debian 13 (Trixie) 的问题
  - 选项1：移除 Docker CE 源，使用系统自带 docker.io
  - 选项2：添加 Docker 官方源

## [V0.32] - 2026-02-21

### 优化

- **主界面优化**
  - Logo 下方显示：脚本名称、说明、版本信息
  - 功能模块上方增加"请选择您需要的功能"
  - 菜单选项增加功能描述，易懂方便理解
  - 增加安全风险提示

## [V0.31] - 2026-02-21

### 新增

- **一键安装脚本** - 新增 install.sh
  - 方法1：一键安装 `bash -c "$(curl .../install.sh)"`
  - 方法2：手动下载 curl 方式
  - 安装过程自动检查 root 权限和 PVE 版本

### 新增

- **PVE 版本检查增强**
  - 检查是否为 PVE 系统，不支持则显示"抱歉，不支持此系统"
  - 检查主版本号是否 >= 9，低于 9.0 显示"抱歉，不支持此版本"
  - 明确的版本号和退出提示

### 优化

- 菜单选择改为回车确认（read -n 1 改为 read）
- 用户体验更友好

## [V0.30] - 2026-02-21

### 新增

- **Docker Compose 部署向导** - LXC 管理菜单新增功能
  - 交互式创建 docker-compose.yml（服务名、镜像、端口、环境变量、卷挂载、重启策略）
  - 预置 9 种常用服务模板：一键部署 Nginx、MySQL、PostgreSQL、Redis、MongoDB、Portainer、Nginx Proxy Manager、WordPress、Uptime Kuma
  - 自动执行 `docker compose up -d` 部署

### 新增

- **VM 管理** - 独立菜单模块
  - 虚拟机列表、启动、停止、重启、强制停止
  - 查看/修改 VM 配置
  - VM 控制台

### 新增

- **常用工具** - 独立菜单模块
  - Docker/Docker Compose 安装
  - NTP 时间同步配置
  - htop/lm-sensors 安装
  - Docker 镜像加速配置
  - 一键部署常用容器（Portainer、NPM、Watchtower、Home Assistant）

### 优化

- 备份管理增强：支持恢复备份、删除备份、备份统计
- 换源工具优化为独立菜单

### 重构

- 参考 PVE-Tools 重写交互逻辑
- 使用 read -n 1 读取单键输入
- 增加 clear 清除屏幕避免残留
- 恢复交互菜单模式

## [V0.28] - 2026-02-21

### 重构

- 移除交互模式，改为纯命令行模式
- 解决管道执行的闪屏问题
- 代码精简至约 150 行

## [V0.27] - 2026-02-21

### 重构

- 完全简化代码，移除 logo 显示
- 移除管道检测等复杂逻辑
- 代码从 500+ 行精简到约 200 行
- 解决屏幕闪烁问题

## [V0.26] - 2026-02-21

### 重构

- 移除 set -e，避免意外退出
- 移除 clear 命令，减少屏幕闪烁
- 简化交互逻辑，优化代码结构
- 减少冗余内容，提升运行速度

### 修复

- 修复空输入导致无限循环问题

## [V0.24] - 2026-02-21

### 修复

- 修复管道执行时 stdin 问题（自动保存脚本后执行）
- 移除 su - root 命令（SSH 默认 root）

## [V0.23] - 2026-02-21

### 修复

- 修复管道执行时无法交互的问题
- 增加非 TTY 环境检测

## [V0.22] - 2026-02-21

### 重构

- 所有功能完全集成到单个 pve-tool.sh 文件
- 无需下载任何额外文件
- 精简目录结构

## [V0.21] - 2026-02-21

### 重构

- 合并为单文件脚本，无需克隆仓库
- 直接通过 curl | bash 执行
- 增加操作前确认提示

### 新增

- 安装脚本增加 PVE 版本检测（仅支持 PVE 9.0+）

### 修复

- 安装脚本提示修改为 su 命令

## [V0.18] - 2026-02-21

### 修复

- 安装脚本对 apt 镜像源错误更宽容

## [V0.17] - 2026-02-21

### 修复

- 修复 Docker 安装仅支持 Debian 13 (Trixite)，移除阿里云源

## [V0.16] - 2026-02-21

### 修复

- 修复 Docker 安装兼容性问题（多源回退：官方源→阿里云源→系统自带）

## [V0.15] - 2026-02-21

### 修复

- 修复 Docker 安装不支持 Debian 13 (Trixie) 的问题

## [V0.14] - 2026-02-21

### 新增

- 一键安装脚本增加详细日志显示
- 一键安装脚本自动安装 git

### 修复

- 修复分支从 main 改为 master（解决 404 错误）
- 修复一键安装脚本缩进错误

## [V0.13] - 2026-02-21

### 新增

- 一键安装脚本自动安装 git

## [V0.12] - 2026-02-21

### 修复

- 修复分支从 main 改为 master（解决 404 错误）
- 修复一键安装脚本缩进错误
- 增加缓存刷新避免 404

## [V0.11] - 2026-02-21

### 修复

- 修复一键安装脚本语法错误

### 新增

- **主框架**
  - 交互式菜单界面
  - 命令行模式支持
  - ASCII Logo 显示

- **备份管理模块**
  - 列出所有 VM/LXC 备份
  - 创建备份（支持 snapshot 模式）
  - 清理过期备份
  - 恢复备份

- **系统监控模块**
  - 系统状态概览（CPU/内存/磁盘/运行时间）
  - 虚拟机状态列表
  - LXC 容器状态列表
  - 资源阈值检查告警
  - 网络接口状态
  - 系统日志查看

- **LXC 容器管理模块**
  - 列出所有容器
  - 创建容器（支持自定义配置）
  - 启动/停止/重启容器
  - 删除容器（支持强制删除）
  - 容器详情查看
  - **软件安装功能**
    - Docker 安装（使用阿里云镜像源加速）
    - Docker Compose 安装（使用 pip）
    - Docker 镜像源切换（6 个国内镜像源）
    - Docker 容器管理（镜像搜索、拉取、运行）
  - **Docker Compose 引导**
    - 内置模板（Nginx/MySQL/Redis/Portainer）
    - 自定义模板创建
    - 一键启动服务

- **系统管理模块**
  - 显示镜像源配置
  - 切换镜像源（6 个国内镜像源）
    - 中科大、清华、阿里云、华为云、腾讯云、网易
  - 禁用 PVE 企业源
  - 配置 PVE 社区源
  - 系统更新
  - 系统清理
  - 系统信息显示

### 优化

- Docker 安装使用阿里云镜像源，解决国内下载慢问题
- Docker 镜像搜索使用预设列表，解决 Docker Hub API 国内无法访问问题
- Docker 安装后自动配置镜像加速器并询问是否切换
- Docker Compose 安装后提供使用引导和模板创建
- 界面简洁化，移除不必要的装饰

### 修复

- 修复容器删除功能无法正常工作的问题
- 修复 Docker Compose 安装失败的问题
- 修复菜单选项重复的问题

---

## 版本说明

- **V0.1** - 初始版本，包含基础功能模块
